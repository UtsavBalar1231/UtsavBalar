---
import SocialIcon from "./SocialIcon.astro";
import { socials, type Social } from "../data/socials";

// Split socials into two rows for balanced layout
const firstRowSocials = socials.slice(0, 4);
const secondRowSocials = socials.slice(4);
---

<!-- Start: Social Links -->
<div class="flex flex-col gap-3 mt-3 sm:mt-4">
  <!-- First Row -->
  <div class="flex justify-between items-center">
    {
      firstRowSocials.map((social) => (
        <a
          href={social.link}
          target="_blank"
          title={social.title}
          rel="noopener noreferrer"
          class="social-link flex items-center justify-center w-9 h-9 sm:w-10 sm:h-10 rounded-3xl transition-all duration-150 border-2 hover:-translate-y-0.5 p-2 sm:p-3"
          onclick={social.onClick}
        >
          <SocialIcon icon={social.icon} />
        </a>
      ))
    }
  </div>

  <!-- Second Row -->
  <div class="flex justify-between items-center">
    {
      secondRowSocials.map((social) => (
        <a
          href={social.link}
          target="_blank"
          title={social.title}
          rel="noopener noreferrer"
          class="social-link flex items-center justify-center w-9 h-9 sm:w-10 sm:h-10 rounded-3xl transition-all duration-150 border-2 hover:-translate-y-0.5 p-2 sm:p-3"
          onclick={social.onClick}
        >
          <SocialIcon icon={social.icon} />
        </a>
      ))
    }

    <!-- Theme selection is now handled in VS Code Properties Panel -->
  </div>
</div>
<!-- End: Social Links -->

<style>
  .social-link {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--border-color);
  }
  
  .social-link:hover {
    background-color: var(--accent-primary);
	border-color: var(--accent-primary);
  }
</style>

<script>
  // Make sure the refreshCatImage function is available in the global scope
  if (typeof window.refreshCatImage !== 'function') {
    window.refreshCatImage = () => {
      const avatarEl = document.getElementById('profile-avatar') as HTMLImageElement;
      if (avatarEl) {
        const random = Math.floor(Math.random() * 1000);
        const width = avatarEl.getAttribute('width');
        const height = avatarEl.getAttribute('height');
        	  avatarEl.src = `https://cataas.com/cat/funny?width=${width}&height=${height}&s=${random}`;
      }
    };
  }
</script>
