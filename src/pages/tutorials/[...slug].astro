---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import MDXContent from "../../components/MDXContent.astro";
import CodeBlock from "../../components/CodeBlock.astro";
import Note from "../../components/mdx/Note.astro";
import Warning from "../../components/mdx/Warning.astro";
import Terminal from "../../components/mdx/Terminal.astro";

export async function getStaticPaths() {
  const tutorials = await getCollection("tutorials");
  return tutorials.map((tutorial: CollectionEntry<"tutorials">) => ({
    params: { slug: tutorial.slug },
    props: { tutorial },
  }));
}

const { tutorial } = Astro.props as { tutorial: CollectionEntry<"tutorials"> };

const components = {
  CodeBlock,
  Note,
  Warning,
  Terminal,
};
---

<Layout title={tutorial.data.title}>
  <main>
    <MDXContent
      collection="tutorials"
      slug={tutorial.slug}
      components={components}
      class="tutorial-prose"
    />
  </main>
</Layout>

<style is:global>
  /* Tutorial-specific prose overrides for terminal theme */
  .tutorial-prose {
    color: var(--term-text);
  }
  .tutorial-prose h1,
  .tutorial-prose h2,
  .tutorial-prose h3 {
    text-shadow: 0 0 2px currentColor;
  }
</style>
