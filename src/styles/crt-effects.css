/* Simplified Overlay Effects - Aligned with richardapps-web */

/* Performance toggle for effects */
@media (prefers-reduced-motion: reduce) {
  .noise-overlay,
  .grunge-overlay {
    animation: none !important;
    display: none !important;
  }
}

:root {
  --noise-opacity: 0.35;
  --grunge-overlay-opacity: 0.055; /* Reduced by 50% from 0.11 */
  --noise-speed: 0.3s;
}

/* Noise overlay - Simple animated texture */
.noise-overlay {
  position: fixed;
  overflow: hidden;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  height: 100%;
  width: 100%;
  min-height: 100vh;
  pointer-events: none;
  z-index: 5;

  background-blend-mode: multiply;
  background: url("/noise-textures/noisy-texture-200x200-1.png");
  filter: contrast(1.2) brightness(0.9) sepia(0.3) saturate(1.2)
    hue-rotate(var(--noise-hue-rotate, 90deg));
  opacity: var(--noise-opacity);

  animation: noise-cycle var(--noise-speed, 0.3s) steps(4) infinite;
}

/* Grunge overlay for texture depth */
.grunge-overlay {
  position: fixed;
  overflow: hidden;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  height: 100%;
  width: 100%;
  min-height: 100vh;
  pointer-events: none;
  z-index: 4;

  background: url("/grunge.webp");
  background-size: cover;
  mix-blend-mode: soft-light;
  opacity: var(--grunge-overlay-opacity);
}

/* Noise texture animation - cycles through 4 noise patterns */
@keyframes noise-cycle {
  0% {
    background-image: url("/noise-textures/noisy-texture-200x200-1.png");
  }
  25% {
    background-image: url("/noise-textures/noisy-texture-200x200-2.png");
  }
  50% {
    background-image: url("/noise-textures/noisy-texture-200x200-3.png");
  }
  75% {
    background-image: url("/noise-textures/noisy-texture-200x200-4.png");
  }
}

/* Ultra mode adjustments */
@media (min-width: 2560px) {
  .grunge-overlay {
    opacity: calc(var(--grunge-overlay-opacity) * 0.5);
  }
}

/* Pause animations when page is not visible */
@media screen {
  .noise-overlay[data-paused="true"],
  .grunge-overlay[data-paused="true"] {
    animation-play-state: paused;
  }
}

/* Performance Mode Overrides */
[data-performance="true"] .noise-overlay,
[data-performance="true"] .grunge-overlay,
[data-performance="true"] .matrix-bg {
  display: none !important;
}

[data-performance="true"] * {
  animation: none !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* Keep essential transitions for usability */
[data-performance="true"] .theme-toggle,
[data-performance="true"] .performance-toggle,
[data-performance="true"] button,
[data-performance="true"] a {
  transition: opacity 0.15s ease, color 0.15s ease !important;
}
