/* Accessibility: Disable animated background overlays for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  .noise-overlay,
  .grunge-overlay,
  .doom-fire-canvas {
    animation: none !important;
    display: none !important;
  }
}

:root {
  --noise-opacity: 0.35;
  --grunge-overlay-opacity: 0.055;
  --noise-speed: 1s; /* Increased from 0.3s for better performance (70% reduction in repaints) */
}

.noise-overlay {
  position: fixed;
  overflow: hidden;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  height: 100%;
  width: 100%;
  min-height: 100vh;
  pointer-events: none;
  z-index: 5;

  background-blend-mode: multiply;
  background: url("/noise-textures/noisy-texture-200x200-1.png");
  filter: contrast(1.2) brightness(0.9) sepia(0.3) saturate(1.2)
    hue-rotate(var(--noise-hue-rotate));
  opacity: var(--noise-opacity);

  animation: noise-cycle var(--noise-speed) steps(4) infinite;
}

.grunge-overlay {
  position: fixed;
  overflow: hidden;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  height: 100%;
  width: 100%;
  min-height: 100vh;
  pointer-events: none;
  z-index: 4;

  background: url("/grunge.webp");
  background-size: cover;
  mix-blend-mode: soft-light;
  opacity: var(--grunge-overlay-opacity);
}

@keyframes noise-cycle {
  0% {
    background-image: url("/noise-textures/noisy-texture-200x200-1.png");
  }
  25% {
    background-image: url("/noise-textures/noisy-texture-200x200-2.png");
  }
  50% {
    background-image: url("/noise-textures/noisy-texture-200x200-3.png");
  }
  75% {
    background-image: url("/noise-textures/noisy-texture-200x200-4.png");
  }
}

@media (min-width: 2560px) {
  .grunge-overlay {
    opacity: calc(var(--grunge-overlay-opacity) * 0.5);
  }
}

@media screen {
  .noise-overlay[data-paused="true"],
  .grunge-overlay[data-paused="true"] {
    animation-play-state: paused;
  }
}

[data-performance="true"] .noise-overlay,
[data-performance="true"] .grunge-overlay,
[data-performance="true"] .matrix-bg,
[data-performance="true"] .doom-fire-canvas {
  display: none !important;
}

[data-performance="true"] .theme-toggle,
[data-performance="true"] .performance-toggle,
[data-performance="true"] button,
[data-performance="true"] a {
  transition:
    opacity 0.15s ease,
    color 0.15s ease !important;
}
